

作为一名页面仔，在正常开发过程中极少与编译和链接打交道。只知道xcode的run成功之后就把app安装到手机上了。那么run究竟做了哪些事情呢？

其实主要就做了这么几件事：
- 编译
- 静态链接
- 代码签名
- 动态链接

这篇就先探讨一下编译和静态链接。


## 编译

至今还记得读本科时的三大"挂王"，编译原理就名列其中。研究生复试时也被问到了相关内容，这玩意就是临时抱佛脚看两眼，看完就忘了，因为实在是用不到。今天就再来复习一下吧。

编译可以分为以下几个部分：
- 预编译
- 词法分析
- 语法分析
- 语义分析
- 源码优化生成中间代码
- 目标代码生成
- 目标代码优化

#### 预编译

预编译可以理解为编译前的准备工作，主要完成这么几件事：

> - 删除所有的#define，展开所有的宏定义
> - 处理条件编译指令，比如#if, #else, #endif等
> - 处理所有的#include预编译指令，将被include的文件插入到预编译指令的位置
> - 删除所有的注释
> - 添加行号和文件名标识，用于编译器产生调试用的行号信息以及编译时给出的错误和警告的行号信息
> - 保留所有的#pragma指令，编译器会使用
